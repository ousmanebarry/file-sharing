<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="/style.css" type="text/css" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" type="image/png" href="/favicon.png" />
		<title>File Sharing</title>
	</head>
	<body>
		<div class="container">
			<h1>File Uploaded Successfully</h1>

			<% if(locals.fileLink != null) { %>
			<div class="link">
				<p>Your file is ready to share! Copy the link below:</p>
				<a id="fileLink" href="<%= locals.fileLink %>"><%= locals.fileLink %></a>
				<button id="copy">Copy Link</button>
			</div>
			<% } %>
		</div>

		<script>
			document.getElementById('copy')?.addEventListener('click', async () => {
				const fileLink = document.getElementById('fileLink');
				try {
					await navigator.clipboard.writeText(fileLink.href);
					const button = document.getElementById('copy');
					const originalText = button.textContent;
					button.textContent = 'Copied!';
					button.style.backgroundColor = 'var(--success-color)';
					button.style.color = 'white';

					setTimeout(() => {
						button.textContent = originalText;
						button.style.backgroundColor = '';
						button.style.color = '';
					}, 2000);
				} catch (err) {
					console.error('Failed to copy:', err);
				}
			});
		</script>
	</body>
</html>
